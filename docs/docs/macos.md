# macOS 配置说明

## 重要说明

- 本软件在 x64 架构下开发并发布。本软件未在 aarch64 架构（即 arm64，如 M1 等 Apple 芯片）下广泛测试，如果出现问题请及时汇报，谢谢。
- 本软件测试时的系统版本为 macOS 12.0 (Monterey)。不保证其在更高或更低版本系统下仍正常工作。 

## 第一步：下载 VS Code

前往[官方网站](https://code.visualstudio.com/)获取 macOS 版 VS Code 并安装。

## 第二步：获取本软件

直接在[网站首页](https://v4.vscch.tk/)下载即可。macOS 版共有两种下载：
1. （默认）.dmg 映像文件，内含 .app 打包应用程序。总是建议你使用该版本。
2. 可执行文件。需要手动赋予可执行权限、并在安全策略允许后才可运行。

对于 .dmg 映像文件，将其装载后即可看到 .app 应用程序。你可以将其拖入 Applications 文件夹以“安装”它，也可以保存在其它位置。
![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.38.10.png)

> 由于 macOS 对第三方软件的限制十分严格，第一次启动 .app 时可能会禁止运行：
> 
> ![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.25.30.png)
> 
> 建议的解决方案：在访达中，按住 Control 并呼出菜单栏（点按或右键），点击打开。
> 
> ![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.27.29.png)
> ![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.28.13.png)
> 
> 随后即可打开本软件。之后的运行可在启动台、程序坞、访达或者桌面直接打开。

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.29.28.png)

## 第三步：开始配置

打开软件后，点击“下一步”以继续。

### VS Code 选择

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.29.50.png)

如果你将 VS Code “安装”在了“应用程序”文件夹中，或者在 VS Code 中执行过“在 PATH 中安装 'code' 命令”，则工具可以自动显示你的 VS Code 安装路径。此时点击下一步即可。如果你不能点击下一步，你需要进行如下操作之一：
- 在 VS Code 中执行“在 PATH 中安装 'code' 命令”。具体步骤是，打开 VS Code，并按 Command + Shift + P 呼出命令菜单，搜索“Shell 命令：在 PATH 中安装 'code' 命令”并执行。执行完成后，重新运行本工具。
- 手动输入 VS Code 可执行文件的路径，默认位于 .app 路径下的 `Contents/Resources/app/bin/code`。

### 编译器选择

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.46.20.png)

如果你安装过 Xcode，或者其它开发相关软件，则工具会显示编译器的相关信息。如果没有，你将看到如下安装引导界面：

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.47.27.png)

点击右侧的圆形按钮，工具将引导你安装 Xcode Command Line Tools。按照提示等待安装完成后，点击下方的“重新检测”按钮即可看到编译器信息。

一切就绪后，点击“下一步”以继续。

### 工作文件夹选择

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.51.40.png)

输入任意的工作文件夹路径，你的代码以后应当存放在该文件夹内。若该文件夹尚未创建，则工具会自动创建它。点击“下一步”以继续。

### 调整配置选项

一般保持默认即可，具体可参考[配置选项说明](./options.md)。点击“下一步”后，耐心等待工具完成配置流程。

## 第四步：测试

如果配置选项中勾选了“配置完成后自动启动 VS Code”，且未禁用“生成测试文件”，则工具将自动为你打开工作文件夹，并显示工具生成的测试代码。

如果你第一次使用 Apple Clang 编译器，CodeLLDB 扩展会启动并下载必要组件。请耐心等待其完成。如无法下载，可尝试切换网络环境。

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.54.32.png)

在该页面按下运行快捷键（默认为 <kbd>F6</kbd>），即可编译并运行该代码。

![](image/macos/%E6%88%AA%E5%B1%8F2022-09-01%2015.56.20.png)

> 当 iTerm2 活跃，且启用了 Python 脚本功能后，将优先选择弹出 iTerm2 窗口。

在该页面按下调试快捷键（默认为 <kbd>F5</kbd>），即可调试该代码。调试前建议打断点。
